<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>UNION attack</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>UNION attack</h1><br/><strong>INFO</strong><br />• Will retrieve data from another table<br />• Lets you execute an additional SELECT query<br />• e.g: &#39; UNION SELECT username, password FROM users--<br /><strong><br />Requirements</strong><br />• Individual queries must return same number of columns<br />• Data types in each column must be compatible between individual queries<br /><strong><br />STEPS</strong><br />0. Check the type of database first so you know the syntax (found in the cheat sheet)<br />1. Find out how many columns returned from OG Query<br />   ◇ Try ‘ORDER BY 1-- then ’ORDER BY 2-- etc until there is an error -&gt; that&#39;s how many columns there are.<br />   ◇ Try ‘ UNION+SELECT+NULL,NULL ... =&gt; continue adding null’s until there are no errors, that&#39;s how many columns there are.<br />2. Which columns returned from the OG query <br />3. Are the columns returned from query of suitable datatype to hold results from injected query.<br />   ◇ Most of the data you want will likely be in a string format<br />   ◇ Test a sample of payloads with a value in each column:<br />      ▪ ‘ UNION SELECT ’a&#39;,NULL,NULL,NULL-- =&gt; and iterate where ‘a’ sits. Incompatible datatypes will return an error<br />4. Retrieve the data (List contents from DB)<br />   ◇ examine what other databases are available for you to attack. (go to <a href="SQL_Inj--Examine_DB.html">Examine DB</a> Node)<br /><strong><br />If you want to retrieve multiple values in single column</strong><br />• concatenate values together<br />• different concatentation syntax for different DB, look <a href="https://portswigger.net/web-security/sql-injection/cheat-sheet">HERE</a><br />• Good to have a seperator inbetween: username||&#39;~&#39;||password</div></body></html>